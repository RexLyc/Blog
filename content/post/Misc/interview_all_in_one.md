---
title: "面试总结：大全篇"
date: 2023-02-11T22:15:25+08:00
categories:
- 求职面试
tags:
- 求职面试
- 施工中
thumbnailImagePosition: left
thumbnailImage: /images/thumbnail/interview.jpg
---
这篇笔记总结历次求职面试的经历，对笔试、面试题目进行总结，也会对非专业考察内容进行一定的梳理。
<!--more-->
## 整体准备
1. 心理：
    - 放松心态
    - 先思考整体，理清几个要点和思路，再谨慎答题
    - 提前准备几个问考官的问题
1. 行为面试：简短介绍自己（因为已经有简历了），项目经验介绍STAR（背景，完成的任务，做了哪些工作，自己的贡献），跳槽原因（和自己的发展目标不符，而目标公司符合）
1. 技术面试：正确、鲁棒的高质量代码（鲁棒非常重要，一定要保证不能崩溃），软技能（沟通和学习能力）。 不要怕问问题，多问一些限制条件。 在不需要考虑栈上消耗的情况下，适当使用递归减少编程量。
## 专业性考察
1. C/C++：
    1. 类型的最小大小？
        - 空类型的sizeof是1（和编译器有关，但是必须在内存中占有一定空间）。添加普通构造和析构函数，仍是1。添加虚析构，占用计算机位长（e.g.8字节，原因：虚函数表，虚函数表指针）
    1. 复制构造是否可以传值？
        - 复制构造函数不允许是传值函数。传值会导致无限复制构造。
    1. 写一个赋值运算符函数？
        - 4个要点：返回引用，参数是常量引用，释放旧空间，预先检查是否是自己。异常安全性问题（凡是new的时候都要考虑）。多线程安全问题。[常见运算符重载](https://www.runoob.com/cplusplus/cpp-overloading.html)
    1. sizeof的值？
        - 数组：数组总长（字节数）
        - 指针：计算机字长（字节数）
        - 数组形参：退化为指针，仍然是计算机字长（字节数）
    1. char a[]="hello"，sizeof(a)=?
        - 6，字符串字面值结尾会自动添加"\0"
    1. char (\*p)[5]和char\* p[5]的区别？
        - 根据括号优先原则，前者是一个数组指针，指向char[5]，后者是一个指针数组
    1. 引用和指针什么时候不能互换？说一下二者区别
        - 引用是一个别名，必须在定义处进行初始化。而指针是一个变量，可以有控制，可以被修改
        - 引用只有一级，指针可以有多级
        - 在const、sizeof、自增自减运算符等使用上均有不同的意义
    1. C++三种时钟的使用区别？
        - steady_clock是启动时间，不可修改，high_resolution_clock是高精度时钟，system_clock是系统时间
    1. 什么是RAII？
        - Resource Acquisition Is Initialization,也称为“资源获取就是初始化”
    1. 类中static成员的初始化时间
        - 在程序启动时
    1. 什么是返回值优化RVO、NRVO？
        - 是一项编译期优化技术，主要是为了消除函数返回值创建的临时对象。RVO是匿名变量优化，NRVO是具名局部变量优化
        - 当满足优化条件的函数返回一个对象时，RVO和NRVO会消除掉临时变量的构造，以及赋值时产生的复制构造，直接在外部调用处进行一次构造
        - 函数返回值不应当使用std::move，这样会导致无法进行RVO、NRVO优化，性能更低
    1. static_cast、dynamic_cast、const_cast、reinterpret_cast区别？
        - 分别主要用于静态强转（类似C的转换）、类型继承关系内的下行转换、移除const、指针转换
    1. make_shared和传递裸指针给shared_ptr的区别？
        - make_shared更安全，而且由于make_shared是统一的一次内存分配，shared_ptr实际上是两次内存分配，使用make_shared，智能指针和实际对象会存储在相近的位置。
    1. 构造函数中能否调用虚函数？
        - 可以调用虚函数，但是仍然会视为普通函数，类在构造构成中尚未建立虚函数表，不具备动态绑定能力，只会调用本类已具有的函数
    1. short i=65537;此时i的值是？
        - 字面值默认是int，而且向下赋值的时候进行截断，所以i的值是1，而不是负数
    1. 以下代码
        ```cpp
        class A {public:virtual void a() {}};
        class B {public:virtual void a() {}};
        class C:public A,public B {public:virtual void a() {}};
        C obj;

        A* pA = &obj;
        B* pB = &obj;
        C* pC = &obj;
        
        // 值是否相等
        cout << pA << endl;
        cout << pB << endl;
        cout << pC << endl;
        ```
        - 多继承的派生类指针向基类转型时，会丢掉其虚表中，在继承时顺序位于当前基类之前的其他基类的虚表内容。因此pA和pC相等、而pB和pA、pC不相等。
    1. C++的多态有哪些
        - 静态多态：模板、重载函数
        - 动态多态：虚函数
    1. 为什么要引入右值引用：
        - 主要是为了解决两件事情（完美转发、移动语义）
    1. 如何实现auto？
        - 个人理解是编译期解析等号右侧、函数返回值的类型，并去除其中的const、&、volatile
    1. unique_ptr为什么必shared_ptr快？
        - unique_ptr没有引用计数，在构造、析构、实用时都没有这方面的访存需求；shared_ptr存在一个原子引用计数需要维护
1. 网络：
    1. IP协议的主要功能？
        - 定义了在TCP/IP 互联网上数据传送的基本单元。为克服数据链路层最大帧长的限制，提供数据分段和重组的功能。
        - 提供用于寻址的标志，寻找网络中每个主机，完成路由选择功能。
        - 包含了不可靠分组传送的规则，指明分组处理、差错信息发生以及分组丢弃等规则
    1. 什么是流量控制和拥塞避免？
        - 流量控制是用发送、接收窗口进行控制，目的是防止接收方处理数据不及时造成丢包
        - 拥塞避免是TCP发送包时，对网络环境的一种考虑，保持分组以合理的速度进入网络，避免网络中的某一段出现拥塞而丢失报文
    1. TCP的可靠性是如何保证的？
        - 连接时的三次握手、超时重发、流量控制和接收发送滑动窗口、拥塞控制（慢启动、拥塞避免、快重传和快恢复）
    1. 如何优化TCP连接的大量TIME_WAIT状态？
        - 优化内核参数：允许TIME_WAIT状态套接字直接用于新TCP连接，快速回收TIME_WAIT套接字，缩短MSL超时时间，减少允许处于TIME_WAIT的套接字数量、增加可用端口范围
        - 在系统的各个部分连接中，尽量使用长连接（客户端-网关-后端）
    1. 负载均衡的底层实现？
        - 在数据链路层：通过伪MAC地址接收，再分发给实际MAC
        - 在网络层：通过伪IP接收，再分发给实际IP
        - 在传输层：伪（IP+端口），再分发
        - 在业务层：使用虚拟URL，再分发给不通的业务主机
1. 数据库
    1. 聚簇索引优势在哪儿？辅助索引为什么使用主键作为值域？
        - 由于行数据和叶子节点存储在一起，这样主键和行数据是一起被载入内存的，找到叶子节点就可以立刻将行数据返回了，如果按照主键Id来组织数据，获得数据更快。
        - 辅助索引使用主键作为"指针" 而不是使用地址值作为指针的好处是，减少了当出现行移动或者数据页分裂时辅助索引的维护工作，使用聚簇索引就可以保证不管这个主键B+树的节点如何变化，辅助索引树都不受影响。
    1. NULL对索引的影响？
        - 以MySQL5.7版本InnoDB引擎为例，索引内可以有NULL值，此时如果使用is NULL，索引仍然可以生效，甚至在联合索引内也是可以的。但是如果使用is NOT NULL，则索引失效。
        - 对于部分数据类型来说，允许可NULL甚至比不允许要耗费更多的存储空间，因此除非有必要，所有列都应当禁止NULL，并设置默认值。
    1. 普通索引和主键索引的区别？
        - 普通索引没有任何限制、值可以为空、值也可能重复
        - 主键索引必须不空、不重复，而且一个表只能有一个主键索引
    1. 缓存雪崩？缓存击穿？缓存穿透？
        - 雪崩是很多key同时过期，造成海量查询到数据库
        - 击穿是单一key过期，但此key又有大量查询
        - 穿透是大量非法数据查询抵达数据库
    1. redis有乱序问题吗？为什么不用多线程？
        - 有乱序问题，可以用事务。redis是内存数据库，内存的处理速度已经很快，而且每个命令不仅仅是读写某个key的对象，还有很多全局数据（比如：服务器状态、统计、内存分配等等），这些全局数据会让线程竞争，而且多线程也有额外的线程切换成本，使用多线程反而降低了效率。Redis虽然没有使用多线程，但是使用了IO多路复用技术，在处理请求方面速度还是很快的。
1. 其他中间件：
    1. kafka为什么读写性能可以很高？
        - pagecache的原理。按照4k一个page的方式组织buffer cache，每一个buffer cache是实际指向磁盘的一个block了，cache提高性能的方式靠预读，第一次读miss会同步读取后面的几个block，第二次读取如果没miss，那么继续异步读取后面的block（扩大一倍），第二次读取如果miss，重复同步读取（说明现在是一个随机存取的情况）
1. 操作系统：
    1. 什么是进程优先级反转？
        - 高、中、低优先级在高等待低时，出现的中先运行的情况，解决方法：优先级继承，高等待低时，将低优先级提高优先级，先执行，之后再恢复；优先级天花板：当进程申请某项共享资源时，都直接默认将所有可以访问到该资源的任务优先级提到最高，简单粗暴，等执行结束再恢复。
    1. 虚拟内存的一次完整访问过程？
        - 每个进程都有自己的一个页表，页表的起始地址放在进程的PCB中，当某个进程运行时，将该起始地址放在页表基址寄存器中（PTBR）。该地址是物理地址。
        - 以32位机器使用两级页表为例，从PTBR中获取页表基址，加载的是一级页表，也就是页目录PGD（Page Global Directory），此后用逻辑地址前10位，索引到页目录项，再加载对应的二级页表PTE（Page Table Entry），最后用中间十位索引到页表项，加载对应页表。最后加上页内偏移就访问到了实际的内存位置。
    1. 内存碎片的产生原因？
        - 内部碎片，没有完全使用分配的内存，外部碎片，未分配的连续内存区域太小，无法满足分配请求。
        - 解决办法，通过分页式的虚存管理。将物理内存分别分配，大幅减少了外部碎片。
    1. 信号和信号量的区别？
        - 信号是处理异步事件的一种方式，通信使用。信号量（semaphore）是同步互斥的机制，负责协调并发环境下的资源使用。
    1. 管道的分类和使用限制？
        - 有命名管道和匿名管道两种。但都是单向的，一端读另一端写。
        - 无名管道pipe只在有血缘关系的进程之间使用，因为其能共享文件描述符表，是一种存在于内存的特殊文件。命名管道fifo则可以用于任意进程间通信，在磁盘上会有该文件的标志，但是仍然会使用内存存储，当内容超过大小限制时会写磁盘。
    1. select、poll、epoll的区别？
        - select和poll比较接近，只是使用的描述符表结构不太一样，支持的数量有差别，fd_set / pollfd，而且每一次调用select需要把fd_set拷贝到内核空间。
        - epoll更高端，开辟一段事件空间。使用epoll_ctl注册对应的文件事件的回调，将可以交给用户处理的放入ready队列。epoll_wait内取出一个可用的，并使用内存映射mmap拷贝到用户空间。
    1. CAS的原理？是悲观锁还是乐观锁？
        - 通过CPU的CAS指令、内存总线锁、缓存锁共同保证
        - 是乐观锁
    1. 内核对象资源是什么？
        - 操作系统内核需要维护的一些对象，比如进程、线程、信号量、文件描述符，这些内容可能在不同的内核模块、用户进程中都有引用，内核使用引用计数来维护，当计数归0才会将其删除。
    1. 什么时候会发生栈溢出？
        - 局部数组过大、递归层数过多、指针/数组越界。
1. 数据结构：
    1. 散列冲突如何解决？
        - 链表法、开放寻址法、再散列
    1. AVL和红黑树的优缺点？
        - AVL树平衡性更高，因此查询有一定优势。但是其平衡维护时最坏的情况可能需要调整到根节点，删除操作性能一般，适合查询极为频繁，而插入删除修改很少的数据场景
        - 红黑树平衡性稍差，因此查询有一定劣势。但其平衡维护最差也是固定调整次数，删除操作性能较好，更稳定。在Linux内核、STL等多个场景下使用。
1. 算法/数学题：
    1. 1000瓶药，1瓶有毒，会在24h时死亡，需要多少小白鼠才能在第24h的时候找出来？
        - 串行：如果不考虑第24h找到这个要求，可以用传统的查找方式，即串行的二分查找，首次让小白鼠喝500瓶，然后根据结果选择下250瓶喝哪些。
        - 并行：从题目可知只能进行一次测试，即只能通过一批死亡测出结果。实际上也可以并行的做二分。这里简化为1024瓶药，需要10个bit来表达，编号后，第一瓶是0000000000，最后一瓶是1111111111。令第i个小白鼠，喝下所有第i个bit为1的药。就能实现。下图以16瓶药为例子，说明4个老鼠如何能做到一次性检测。
            ![并行二分](/images/interview/parallel_binary_search.png)
    1. 1个袋子、有100个黑球、100个白球，每次取出两个，如果颜色相同，则放回一个黑球，颜色不同，则放回一个白球，问最后剩下一个黑球的概率？
        - 看似复杂，但只要**分析一次操作的所有情况**就能进行总结：即每次操作，减少一个黑球，或者少两个白球但多一个黑球。从计算机的角度来看，这是归纳出了一个原子操作。
        - 在这个前提下，实际上很快就能发现，游戏存在两种结束情况：只要白球初始值是偶数，则袋子内最后的球数是一定可以归零的；否则最后会剩余一个白球
1. 硬件：
    1. 什么是local apic？
        - PIC（Programmable Interrupt Controller可编程中断控制器）是一个有相当久历史的硬件，它对外负责连接外部各种容易产生中断的设备，对内和CPU相连。
        - 随着中断类型的增加和多CPU的出现，推出了更高级的APIC技术（Advanced PIC），它分为IO APIC和Local APIC两部分，前者就一个，仍然负责和外设通信，后者每个CPU内部集成一个，各个Local APIC、IO APIC一起通过系统总线相连。
        - IO APIC可以发送中断给指定的Local APIC，Local APIC之间也可以相互发送中断
        > 注意多CPU和多核心并不完全一样，多CPU指的是有多块CPU芯片，多核心则是一个CPU芯片中集成多个物理核心。服务器上经常有多路CPU。
    1. x86架构的内存管理？
        - x86架构的内存管理是段页式内存，这里的段对应的是原本的分段式内存管理（程序段、数据段）、页则是代表内存分页管理，这两者结合起来就是段页式。按照从段到页的阶段，地址也分为虚拟地址、线性地址、物理地址。
        - 逻辑地址包含段选择器和偏移两个部分，用这两部分去描述符表（有全局和局部两种）中查找对应的线性地址，用线性地址查找到属于自己的页表，随后进行页式存储管理
        - 但对于不同的操作系统，也未必真的按照段页式编写内存管理部分，比如Linux就选择将所有的内存编入同一个段，也就是地址从一开始就是线性地址，完全使用分页管理
    1. 分支预测的原理？
        - 静态预测，按照固定的分支预测
        - 动态预测，维护一个历史分支记录，动态改变预测
        - 还有更多的预测方式，如两级自适应、局部&全局分支预测、神经分支预测
    1. 超标量、超线程技术是什么？
        - 超标量的实现：CPU的一个物理核心内部实际也有由多条流水线，往往还会结合指令乱序发射、多发射技术（有多条流水线，当然可以将没有依赖性的指令同步执行），最终达成在一个时钟周期内执行多条指令的能力
        - 超线程的实现：增加了取指器和译码器，使得能让多个线程在一定程度内共享一个CPU的资源，减少流水线的空闲
        > 其实从某个角度来说，超标量和超线程等技术，也是导致内存一致性问题的原因
1. 其他：
    1. 大尾端是什么？如何判断？
        - 大地址在数字尾端。0x12345678，如果大地址位是0x78，则是大尾端
        - 网络续默认都是大尾端
        - 常用的CPU中，x86是小尾端、arm是大尾端
        - 另一种标准翻译是大端序（Big Endian）、小端序（Little Endian），大端序就是大尾端，小端序就是小尾端。
    1. OLAP和OLTP是什么，有什么区别？
        - OLTP（on-line transaction processing）翻译为联机事务处理， OLAP（On-Line Analytical Processing）翻译为联机分析处理，从字面上来看OLTP是做事务处理，OLAP是做分析处理。从对数据库操作来看，OLTP主要是对数据的增删改，OLAP是对数据的查询。二者在技术栈、系统目标、服务对象、时间敏感度、业务阶段都有一定区别。
    1. 谈谈秒杀系统的设计？
        - 核心思路就是对流量做验证、限流、拦截，必要的时候对服务进行降级，模糊查询结果。
        - 前端：提交按钮限制提交次数，参与活动必须登录，前端页面做成静态、本地缓存，避免对前端服务器产生压力
        - 网关：控制同一用户的流量，控制同一ip的流量
        - 业务：使用消息队列限制业务量，利用缓存加快查询速度，定期更新缓存数据
        - 数据库：根据流量情况，可能对数据库进行单独创建，分库分表，提升数据库处理能力。上锁、事务，保证不超卖。
    1. 并行计算的模型有哪些：
        - 常见的并行计算模型有：BSP、PRAM、LogP、C3、BDM
    
## 非专业内容考察
1. 兴趣爱好
1. 职业规划
1. 问自己的缺点
    - 说一些可以克服的，比如技术基础需要加强、工作经验有一定欠缺、对待工作有时过于细致影响效率、爱好有些分散的缺少拳头爱好
    - 被发现问题立刻承认，没必要遮掩
1. 一定要准备一份**英文**的自我介绍
1. 为什么从之前的公司离职
    - 技术追求、职业规划、生活工作

## 推荐阅读
1. [Github32k⭐ C/C++ 技术面试基础知识总结](https://github.com/huihut/interview)

## 参考
1. [知乎：后端都要学习什么？](https://www.zhihu.com/question/24952874/answer/518162706)
1. [MyBatis官网](https://mybatis.org/mybatis-3/zh/index.html)
1. [MySQL8.0 存储引擎综述](https://dev.mysql.com/doc/refman/8.0/en/pluggable-storage-overview.html)
1. [优先级反转](https://blog.51cto.com/u_15478392/4912194)
1. [内存访问全过程](https://blog.csdn.net/zhouzhiyao960211/article/details/106038416)
1. [操作系统——页表寻址](https://blog.csdn.net/qq_16775293/article/details/107855301)
1. [MySQL中NULL对索引的影响](https://www.jianshu.com/p/3cae3e364946)
1. [OLTP与OLAP的关系是什么？ - Kyligence的回答 - 知乎](https://www.zhihu.com/question/24110442/answer/851671343)
1. [【x86架构】内存管理](https://blog.csdn.net/jiangwei0512/article/details/63687977)
1. [理解X86的内存管理](https://www.cnblogs.com/kongchung/p/15322175.html)
1. [段式、页式内存管理以及linux采用的方案图解](https://blog.csdn.net/jinking01/article/details/107098437)
1. [知乎专栏：计算机中断体系一：历史和原理](https://zhuanlan.zhihu.com/p/26464793)
1. [APIC的那些事儿](https://www.binss.me/blog/what-is-apic/)
1. [【并发基础】CAS（Compare And Swap）操作的底层原理以及应用详解](https://blog.nowcoder.net/n/3f413b4af088415baafc159591a1a411#4.1%20%E5%A4%84%E7%90%86%E5%99%A8%E8%87%AA%E5%8A%A8%E4%BF%9D%E8%AF%81%E5%9F%BA%E6%9C%AC%E5%86%85%E5%AD%98%E6%93%8D%E4%BD%9C%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7)
1. [秒杀系统设计](https://juejin.cn/post/6861749238466576397)、[【秒杀抽奖】秒杀系统设计](https://pdai.tech/md/arch/arch-example-seckill.html)、[这一次，彻底弄懂“秒杀系统”](https://www.infoq.cn/article/ypqschsrdsk8bv5nhny4)
1. [linux专题 1:page cache](https://www.jianshu.com/p/9fbabff592ff)
1. [WIKI 分支预测器](https://zh.wikipedia.org/wiki/%E5%88%86%E6%94%AF%E9%A0%90%E6%B8%AC%E5%99%A8)
1. [内核笔记（七）——内核对象（Kernel object）机制](https://developer.aliyun.com/article/1148764)
1. [并行计算模型](https://blog.csdn.net/Shockang/article/details/115987113)
1. [static_cast, dynamic_cast和reinterpret_cast的区别](https://blog.51cto.com/mingtangduyao/1832128)
1. [红黑树与AVL树，各自的优缺点总结](https://www.jianshu.com/p/37436ed14cc6)
1. [关于AVL树和红黑树的一点看法](https://zhuanlan.zhihu.com/p/93369069)